<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Thoughts on &quot;Arguments and Results&quot;, Part 2</title>
  <meta name="description" content="Back in 1997, James Noble published a paper called Arguments and Results which outlined several useful patterns for designing better object protocols. Despit...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://yourdomain.com/articles/arguments-and-results-2">
  <link rel="alternate" type="application/rss+xml" title="Practicing Ruby" href="http://yourdomain.com/feed.xml">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33127211-2', 'auto');
    ga('send', 'pageview');
  </script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Practicing Ruby</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about">About</a>
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Thoughts on "Arguments and Results", Part 2</h1>
    <p class="post-meta"><time datetime="2011-11-30T00:00:00-05:00" itemprop="datePublished">Nov 30, 2011</time> • Gregory Brown</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Back in 1997, James Noble published a paper called <a href="http://www.laputan.org/pub/patterns/noble/noble.pdf">Arguments and Results</a> which outlined several useful patterns for designing better object protocols. Despite the fact that this paper was written nearly 15 years ago, it addresses design problems that programmers still struggle with today. In this two part article, I show how the patterns James came up with can be applied to modern Ruby programs.</p>

<p><u>Arguments and Results</u> is written in such a way that it is natural to split the patterns it describes into two separate groups: patterns about method arguments and patterns about the results returned by methods. I’ve decided to split this Practicing Ruby article in the same manner in order to make it easier for me to write and easier for you to read.</p>

<p>In <a href="http://practicingruby.com/articles/14">Issue 2.14</a> I outlined various kinds of arguments objects that can be used to simplify the messages being sent within a system. In this issue, I will show how results objects can provide similar flexibility on the response side of things.</p>

<h3 id="results-objects">Results objects</h3>

<p>Results objects are similar to argument objects in that they simplify the interface of one object at the cost of introducing new objects into the system. The <code class="highlighter-rouge">Report</code> class I built for <a href="http://practicingruby.com/articles/13">Issue 2.13</a> is a good example of this sort of object. If we start with its class definition and work our way backwards to what the code would have looked like without it, we will be able to see the reason why this object was introduced in the first place.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">module</span> <span class="nn">SubscriptionCounter</span>
  <span class="k">class</span> <span class="nc">Report</span>
    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">series</span><span class="p">)</span>
      <span class="vi">@series</span> <span class="o">=</span> <span class="n">series</span>

      <span class="vi">@issue_numbers</span> <span class="o">=</span> <span class="n">series</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:number</span><span class="p">)</span>
      <span class="vi">@weekly_counts</span> <span class="o">=</span> <span class="n">series</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:count</span><span class="p">)</span>
      <span class="vi">@weekly_deltas</span> <span class="o">=</span> <span class="n">series</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:delta</span><span class="p">)</span>
      <span class="vi">@average_delta</span> <span class="o">=</span> <span class="no">Statistics</span><span class="p">.</span><span class="nf">adjusted_mean</span><span class="p">(</span><span class="vi">@weekly_deltas</span><span class="p">)</span>
    <span class="k">end</span>
 
    <span class="kp">attr_reader</span> <span class="ss">:issue_numbers</span><span class="p">,</span> <span class="ss">:weekly_counts</span><span class="p">,</span> <span class="ss">:weekly_deltas</span><span class="p">,</span> 
                <span class="ss">:average_delta</span><span class="p">,</span> <span class="ss">:summary</span><span class="p">,</span> <span class="ss">:series</span>

    <span class="k">def</span> <span class="nf">table</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
      <span class="n">series</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">fields</span><span class="p">.</span><span class="nf">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="n">e</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>The following code outlines how <code class="highlighter-rouge">Report</code> is actually used by client code. It essentally serves as a bridge between <code class="highlighter-rouge">Series</code> and <code class="highlighter-rouge">Report::PDF</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">campaigns</span> <span class="o">=</span> <span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">Campaign</span><span class="p">.</span><span class="nf">all</span>
<span class="n">series</span>    <span class="o">=</span> <span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">DataSeries</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">campaigns</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">report</span>    <span class="o">=</span> <span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">Report</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">series</span><span class="p">)</span>

<span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">Report</span><span class="o">::</span><span class="no">PDF</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">report</span><span class="p">).</span><span class="nf">save_as</span><span class="p">(</span><span class="s2">"pr-subscribers.pdf"</span><span class="p">)</span>
</code></pre>
</div>

<p>If we pretend that <code class="highlighter-rouge">Report</code> never existed and that its methods were implemented directly on <code class="highlighter-rouge">DataSeries</code>, we would end up with something similar to the following client code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">campaigns</span> <span class="o">=</span> <span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">Campaign</span><span class="p">.</span><span class="nf">all</span>
<span class="n">series</span>    <span class="o">=</span> <span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">DataSeries</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">campaigns</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">Report</span><span class="o">::</span><span class="no">PDF</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">series</span><span class="p">).</span><span class="nf">save_as</span><span class="p">(</span><span class="s2">"pr-subscribers.pdf"</span><span class="p">)</span>
</code></pre>
</div>

<p>This example actually looks a bit cleaner than the previous one, but results in six new methods getting added to <code class="highlighter-rouge">DataSeries</code> and introduces tighter coupling between the <code class="highlighter-rouge">DataSeries</code> and <code class="highlighter-rouge">PDF</code> objects. Due to the increased coupling, a change in the interface of the <code class="highlighter-rouge">DataSeries</code> object will directly impact the presentation code in the <code class="highlighter-rouge">PDF</code> object, whereas before the <code class="highlighter-rouge">Report</code> object provided a buffer zone between the two classes.</p>

<p>While it is still possible to substitute a <code class="highlighter-rouge">DataSeries</code> object with some other object that provides an equivalent interface, we have lost the flexibility of reusing the code that actually does the aggregation work. Before removing the <code class="highlighter-rouge">Report</code> object, it was possible to use it to wrap any pretty much any <code class="highlighter-rouge">Enumerable</code> collection of objects which provided <code class="highlighter-rouge">number</code>, <code class="highlighter-rouge">count</code>, and <code class="highlighter-rouge">delta</code> methods. Now we must either do the aggregation ourselves or use a <code class="highlighter-rouge">DataSeries</code> object directly.</p>

<p>These downsides are why I introduced the <code class="highlighter-rouge">Report</code> object in the first place, and they make the case for using an object that exists simply to aggregate some results based on the data contained in another object. If I wanted to make the integration of this results object a bit tighter and simplify the client code, I could have introduced a <code class="highlighter-rouge">DataSeries#report</code> method such as the one shown below:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">module</span> <span class="nn">SubscriptionCounter</span>
  <span class="k">class</span> <span class="nc">DataSeries</span>
    <span class="k">def</span> <span class="nf">report</span>
      <span class="no">Report</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>With this method added, I could either have the <code class="highlighter-rouge">Report::PDF</code> accept an object that responds to <code class="highlighter-rouge">report</code>, or call the method explicitly in my client code. If I went with the former approach I could use the same client code as shown in the previous example, making the <code class="highlighter-rouge">Report</code> object completely transparent to the end user. However, the latter approach still looks a bit cleaner than what I had originally without introducing too much coupling into the system:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">campaigns</span> <span class="o">=</span> <span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">Campaign</span><span class="p">.</span><span class="nf">all</span>
<span class="n">series</span>    <span class="o">=</span> <span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">DataSeries</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">campaigns</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="no">SubscriptionCounter</span><span class="o">::</span><span class="no">Report</span><span class="o">::</span><span class="no">PDF</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">series</span><span class="p">.</span><span class="nf">report</span><span class="p">).</span><span class="nf">save_as</span><span class="p">(</span><span class="s2">"pr-subscribers.pdf"</span><span class="p">)</span>
</code></pre>
</div>

<p>While this pattern certainly has its benefits, it may feel a bit unexciting to Ruby developers. When results objects are introduced simply to reduce coupling between two different subsystems in your project or to provide a bit of encapsulation for some cached values, they feel like ordinary objects that don’t require a special name. However, explictly thinking of results objects as an abstraction opens the door for more interesting techniques as well.</p>

<h3 id="lazy-objects">Lazy objects</h3>

<p>One interesting aspect of introducing results objects into a system is that it helps facilitate lazy evaluation. Ruby’s own <code class="highlighter-rouge">Enumerator</code> object provides an excellent example of how powerful this combination can be. Laziness allows <code class="highlighter-rouge">Enumerator</code> objects to efficiently chain different transformations together. This makes it possible to do things like <code class="highlighter-rouge">map.with_index</code> without having to iterate over the collection multiple times or store an intermediate representation of the indexed data:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">].</span><span class="nf">map</span><span class="p">.</span><span class="nf">with_index</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="p">,</span><span class="n">i</span><span class="o">|</span> <span class="s2">"</span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">. </span><span class="si">#{</span><span class="n">e</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"0. 1"</span><span class="p">,</span> <span class="s2">"1. 2"</span><span class="p">,</span> <span class="s2">"2. 3"</span><span class="p">,</span> <span class="s2">"3. 4"</span><span class="p">]</span>
</code></pre>
</div>

<p>Lazy objects can also represent infinite or repeating sequences in a very elegant way. The examples below show some bits of functionality baked into <code class="highlighter-rouge">Enumerator</code> that make modeling these kinds of sequences a whole lot easier.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="o">&gt;&gt;</span>  <span class="n">players</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:red</span><span class="p">,</span> <span class="ss">:black</span><span class="p">].</span><span class="nf">cycle</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;Enumerator: [:red, :black]:cycle&gt;</span>
<span class="o">&gt;&gt;</span> <span class="n">players</span><span class="p">.</span><span class="nf">next</span>
<span class="o">=&gt;</span> <span class="ss">:red</span>
<span class="o">&gt;&gt;</span> <span class="n">players</span><span class="p">.</span><span class="nf">next</span>
<span class="o">=&gt;</span> <span class="ss">:black</span>
<span class="o">&gt;&gt;</span> <span class="n">players</span><span class="p">.</span><span class="nf">next</span>
<span class="o">=&gt;</span> <span class="ss">:red</span>
<span class="o">&gt;&gt;</span> <span class="n">players</span><span class="p">.</span><span class="nf">next</span>
<span class="o">=&gt;</span> <span class="ss">:black</span>
<span class="o">&gt;&gt;</span> <span class="n">odds</span> <span class="o">=</span> <span class="no">Enumerator</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="o">|</span><span class="n">y</span><span class="o">|</span> <span class="n">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kp">loop</span> <span class="p">{</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="o">*</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">}</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;Enumerator: #&lt;Enumerator::Generator:0x00000100972b50&gt;:each&gt;</span>
<span class="o">&gt;&gt;</span> <span class="n">odds</span><span class="p">.</span><span class="nf">next</span>
<span class="o">=&gt;</span> <span class="mi">1</span>
<span class="o">&gt;&gt;</span> <span class="n">odds</span><span class="p">.</span><span class="nf">next</span>
<span class="o">=&gt;</span> <span class="mi">3</span>
<span class="o">&gt;&gt;</span> <span class="n">odds</span><span class="p">.</span><span class="nf">next</span>
<span class="o">=&gt;</span> <span class="mi">5</span>
<span class="o">&gt;&gt;</span> <span class="n">odds</span><span class="p">.</span><span class="nf">take</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
</code></pre>
</div>

<p>While infinite sequences may seem like a very academic topic, they show up in some practical applications as well. For example, some video games use procedural generation to produce seemingly infinite randomly generated maps. The video below demonstrates that technique being used in a very crude manner, but the same general approach could be used to build rich three dimensional environments as well, such as the ones found in <a href="http://www.minecraft.net/">MineCraft</a>. (<em>NOTE: I accidentally uploaded this video with ambient sounds rather than muted, and won’t be able to fix this until I return from vacation after December 15th. If you don’t like the sound of keyboard motions, heavy breathing, and some weird beeping noise: mute your audio before playing this video. Sorry!</em>)</p>

<div align="center">
<iframe width="640" height="480" src="//www.youtube.com/embed/fg-dYZfd6Y4?rel=0" frameborder="0" allowfullscreen=""></iframe>
</div>

<p>To implement the map generation code, I put together a simple <code class="highlighter-rouge">Location</code> object which is essentially an infinite two dimensional doubly linked list. Notice how the class definition below makes extensive use of the common <code class="highlighter-rouge">||=</code> idiom to handle the lazy evaluation and caching.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Location</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">[]</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="vi">@locations</span>        <span class="o">||=</span> <span class="p">{}</span>
    <span class="vi">@locations</span><span class="p">[[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]]</span> <span class="o">||=</span> <span class="kp">new</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
  <span class="k">end</span> 

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="vi">@x</span>     <span class="o">=</span> <span class="n">x</span>
    <span class="vi">@y</span>     <span class="o">=</span> <span class="n">y</span>
    <span class="vi">@color</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:green</span><span class="p">,</span> <span class="ss">:green</span><span class="p">,</span> <span class="ss">:blue</span><span class="p">].</span><span class="nf">sample</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">==</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">other</span><span class="p">.</span><span class="nf">x</span><span class="p">,</span> <span class="n">other</span><span class="p">.</span><span class="nf">y</span><span class="p">]</span>
  <span class="k">end</span>  

  <span class="kp">attr_reader</span> <span class="ss">:x</span><span class="p">,</span> <span class="ss">:y</span><span class="p">,</span> <span class="ss">:color</span>

  <span class="k">def</span> <span class="nf">north</span>
    <span class="vi">@north</span> <span class="o">||=</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="p">,</span><span class="vi">@y</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> 
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">south</span>
    <span class="vi">@south</span> <span class="o">||=</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="p">,</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">east</span>
    <span class="vi">@east</span> <span class="o">||=</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="vi">@y</span><span class="p">]</span> 
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">west</span>
    <span class="vi">@west</span> <span class="o">||=</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="vi">@y</span><span class="p">]</span> 
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">neighbors</span>
    <span class="p">[</span><span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span><span class="p">]</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>While this technique works fine and is the traditional way to achieve lazy evaluation in Ruby, it feels a bit primitive. Ruby does not provide a general purpose construct for lazy evaluation, but if it did, it would allow us to write code similar to what you see below:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Location</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">[]</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="vi">@locations</span>        <span class="o">||=</span> <span class="p">{}</span>
    <span class="vi">@locations</span><span class="p">[[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]]</span> <span class="o">||=</span> <span class="kp">new</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
  <span class="k">end</span> 

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="vi">@x</span>     <span class="o">=</span> <span class="n">x</span>
    <span class="vi">@y</span>     <span class="o">=</span> <span class="n">y</span>
    <span class="vi">@color</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:green</span><span class="p">,</span> <span class="ss">:green</span><span class="p">,</span> <span class="ss">:blue</span><span class="p">].</span><span class="nf">sample</span>

    <span class="vi">@north</span> <span class="o">=</span> <span class="no">LazyObject</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="p">,</span><span class="vi">@y</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">}</span>
    <span class="vi">@south</span> <span class="o">=</span> <span class="no">LazyObject</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="p">,</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">}</span>
    <span class="vi">@east</span>  <span class="o">=</span> <span class="no">LazyObject</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="vi">@y</span><span class="p">]</span> <span class="p">}</span>
    <span class="vi">@west</span>  <span class="o">=</span> <span class="no">LazyObject</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="vi">@y</span><span class="p">]</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">==</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">other</span><span class="p">.</span><span class="nf">x</span><span class="p">,</span> <span class="n">other</span><span class="p">.</span><span class="nf">y</span><span class="p">]</span>
  <span class="k">end</span>  

  <span class="k">def</span> <span class="nf">neighbors</span>
    <span class="p">[</span><span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="kp">attr_reader</span> <span class="ss">:x</span><span class="p">,</span> <span class="ss">:y</span><span class="p">,</span> <span class="ss">:color</span><span class="p">,</span> <span class="ss">:north</span><span class="p">,</span> <span class="ss">:south</span><span class="p">,</span> <span class="ss">:east</span><span class="p">,</span> <span class="ss">:west</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Such an object can be implemented as a simple proxy which delays the execution of a callback until the results are actually needed. The following code illustrates one way to do that:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">LazyObject</span> <span class="o">&lt;</span> <span class="no">BasicObject</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="o">&amp;</span><span class="n">callback</span><span class="p">)</span>
    <span class="vi">@callback</span> <span class="o">=</span> <span class="n">callback</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">__result__</span>
    <span class="vi">@__result__</span> <span class="o">||=</span> <span class="vi">@callback</span><span class="p">.</span><span class="nf">call</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">method_missing</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span>
    <span class="n">__result__</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Another option would be to use <a href="http://moonbase.rydia.net/software/lazy.rb/">lazy.rb</a>, which provides similar functionality via <code class="highlighter-rouge">Lazy::Promise</code> objects that get instantiated via the <code class="highlighter-rouge">Lazy.promise</code> method:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"lazy"</span>

<span class="k">class</span> <span class="nc">Location</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">[]</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="vi">@locations</span>        <span class="o">||=</span> <span class="p">{}</span>
    <span class="vi">@locations</span><span class="p">[[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]]</span> <span class="o">||=</span> <span class="kp">new</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
  <span class="k">end</span> 

  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
    <span class="vi">@x</span>     <span class="o">=</span> <span class="n">x</span>
    <span class="vi">@y</span>     <span class="o">=</span> <span class="n">y</span>
    <span class="vi">@color</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:green</span><span class="p">,</span> <span class="ss">:green</span><span class="p">,</span> <span class="ss">:blue</span><span class="p">].</span><span class="nf">sample</span>

    <span class="vi">@north</span> <span class="o">=</span> <span class="no">Lazy</span><span class="p">.</span><span class="nf">promise</span> <span class="p">{</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="p">,</span><span class="vi">@y</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">}</span>
    <span class="vi">@south</span> <span class="o">=</span> <span class="no">Lazy</span><span class="p">.</span><span class="nf">promise</span> <span class="p">{</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="p">,</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">}</span>
    <span class="vi">@east</span>  <span class="o">=</span> <span class="no">Lazy</span><span class="p">.</span><span class="nf">promise</span> <span class="p">{</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="vi">@y</span><span class="p">]</span> <span class="p">}</span>
    <span class="vi">@west</span>  <span class="o">=</span> <span class="no">Lazy</span><span class="p">.</span><span class="nf">promise</span> <span class="p">{</span> <span class="no">Location</span><span class="p">[</span><span class="vi">@x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="vi">@y</span><span class="p">]</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">==</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">other</span><span class="p">.</span><span class="nf">x</span><span class="p">,</span> <span class="n">other</span><span class="p">.</span><span class="nf">y</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">neighbors</span>
    <span class="p">[</span><span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="kp">attr_reader</span> <span class="ss">:x</span><span class="p">,</span> <span class="ss">:y</span><span class="p">,</span> <span class="ss">:color</span><span class="p">,</span> <span class="ss">:north</span><span class="p">,</span> <span class="ss">:south</span><span class="p">,</span> <span class="ss">:east</span><span class="p">,</span> <span class="ss">:west</span>
<span class="k">end</span>
</code></pre>
</div>

<p>This approach provides a thread safe solution and prevents us from having to reinvent the wheel. The only downside is that <em>lazy.rb</em> is a bit dated and generates some warnings on Ruby 1.9 due to the way it implements its core proxy object. But whether you use <em>lazy.rb</em> or roll your own lazy object, it is important to understand that the difference between this pattern and the common Ruby idiom of delaying execution via cached method calls is more than just a matter of aesthetics. To illustrate why that is the case, we can can consider the difference in behavior between the two approaches when <code class="highlighter-rouge">Location#neighbors</code> is called.</p>

<p>In the original example that explictly defines the <code class="highlighter-rouge">north</code>, <code class="highlighter-rouge">south</code>, <code class="highlighter-rouge">east</code>, and <code class="highlighter-rouge">west</code> methods, the first time the <code class="highlighter-rouge">neighbors</code> method is called, four <code class="highlighter-rouge">Location</code> objects are created. This means that the following line of code will generate all four neighboring <code class="highlighter-rouge">Location</code> objects even if not all of them are needed to answer the question it asks:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">green_neighbor</span> <span class="o">=</span> <span class="n">location</span><span class="p">.</span><span class="nf">neighbors</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span> <span class="o">|</span><span class="n">loc</span><span class="o">|</span> <span class="n">loc</span><span class="p">.</span><span class="nf">color</span> <span class="o">==</span> <span class="ss">:green</span> <span class="p">}</span>
</code></pre>
</div>

<p>By contrast, a <code class="highlighter-rouge">Location</code> object that uses some form of lazy object would behave differently here. Because <code class="highlighter-rouge">Enumerable#find</code> returns as soon as it finds a single object which matches its conditions, the <code class="highlighter-rouge">Location#color</code> method will not necessarily get called on each of the neighboring locations. This means that in the best case scenario, only one new <code class="highlighter-rouge">Location</code> object would end up getting created. While this particular example is a bit contrived, it’s not hard to see why this is a desireable characteristic of lazy objects that cannot be easily emulated via the standard Ruby idiom for delayed execution.</p>

<h3 id="future-objects">Future objects</h3>

<p>Lazy objects provide certain performance benefits in the sense that they make it possible to avoid unnecessary computation, but they don’t do anything to improve the perceived waiting time for any computations that actually need to be run. This is where future objects come in handy.</p>

<p>A future object is essentially an object which immediately begins doing some processing in the background but only blocks if the results are demanded before the thread has finished executing. The example below demonstrates how this sort of object can come in handy for building a simple non-blocking download manager:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"open-uri"</span>
<span class="nb">require</span> <span class="s2">"lazy"</span>

<span class="k">class</span> <span class="nc">DownloadManager</span>
  <span class="k">def</span> <span class="nf">initialize</span>
    <span class="vi">@downloads</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="n">downloads</span> <span class="o">&lt;&lt;</span> <span class="no">Lazy</span><span class="p">.</span><span class="nf">future</span> <span class="p">{</span> <span class="no">File</span><span class="p">.</span><span class="nf">binwrite</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="nf">read</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">finish_all_downloads</span>
    <span class="n">downloads</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="no">Lazy</span><span class="p">.</span><span class="nf">demand</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="kp">attr_reader</span> <span class="ss">:downloads</span>
<span class="k">end</span>

<span class="n">downloader</span> <span class="o">=</span> <span class="no">DownloadManager</span><span class="p">.</span><span class="nf">new</span> 

<span class="n">downloader</span><span class="p">.</span><span class="nf">save</span><span class="p">(</span><span class="s2">"http://prawn.majesticseacreature.com/manual.pdf"</span><span class="p">,</span> <span class="s2">"manual.pdf"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Starting Prawn manual download"</span>

<span class="n">downloader</span><span class="p">.</span><span class="nf">save</span><span class="p">(</span><span class="s2">"http://sandal.github.com/rbp-book/pdfs/rbp_1-0.pdf"</span><span class="p">,</span> <span class="s2">"rbp_1-0.pdf"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Starting download of Ruby Best Practices book"</span>

<span class="nb">puts</span> <span class="s2">"Waiting for downloads to finish..."</span>
<span class="n">downloader</span><span class="p">.</span><span class="nf">finish_all_downloads</span>
</code></pre>
</div>

<p>In this particular example the callback doesn’t return a meaningful value, and so the <code class="highlighter-rouge">DownloadManager#finish_all_downloads</code> method makes use of <code class="highlighter-rouge">Lazy.demand</code> to force each future to wrap up its computations. However, the following example demonstrates that the future objects that <em>lazy.rb</em> provides can also be used as transparent proxy objects:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nb">require</span> <span class="s2">"open-uri"</span>
<span class="nb">require</span> <span class="s2">"lazy"</span>

<span class="k">class</span> <span class="nc">Download</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="vi">@filename</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="vi">@contents</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="nf">read</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">save</span>
    <span class="no">File</span><span class="p">.</span><span class="nf">binwrite</span><span class="p">(</span><span class="vi">@filename</span><span class="p">,</span> <span class="vi">@contents</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">DownloadManager</span>
  <span class="k">def</span> <span class="nf">initialize</span>
    <span class="vi">@downloads</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="n">downloads</span> <span class="o">&lt;&lt;</span> <span class="no">Lazy</span><span class="p">.</span><span class="nf">future</span> <span class="p">{</span> <span class="no">Download</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">finish_all_downloads</span>
    <span class="n">downloads</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span> <span class="n">d</span><span class="p">.</span><span class="nf">save</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="kp">attr_reader</span> <span class="ss">:downloads</span>
<span class="k">end</span>

<span class="n">downloader</span> <span class="o">=</span> <span class="no">DownloadManager</span><span class="p">.</span><span class="nf">new</span> 

<span class="n">downloader</span><span class="p">.</span><span class="nf">save</span><span class="p">(</span><span class="s2">"http://prawn.majesticseacreature.com/manual.pdf"</span><span class="p">,</span> 
                <span class="s2">"manual.pdf"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Starting Prawn manual download"</span>

<span class="n">downloader</span><span class="p">.</span><span class="nf">save</span><span class="p">(</span><span class="s2">"http://sandal.github.com/rbp-book/pdfs/rbp_1-0.pdf"</span><span class="p">,</span> 
                <span class="s2">"rbp_1-0.pdf"</span><span class="p">)</span>
<span class="nb">puts</span> <span class="s2">"Starting download of Ruby Best Practices book"</span>

<span class="nb">puts</span> <span class="s2">"Waiting for downloads to finish..."</span>
<span class="n">downloader</span><span class="p">.</span><span class="nf">finish_all_downloads</span>
</code></pre>
</div>

<p>In both examples, the future object will block as long as necessary to allow the computations to complete, but only when it is forced to do so. Until this occurs, other operations can continue in parallel and/or block the execution of these future objects. This means in the best case scenario, a computation will end up being completed before it is actually needed, and the results will be returned from the future object’s cache at that time.</p>

<p>While implementing a generic future object from scratch would not be difficult for anyone who has experience working with threads, concurrency is a weak point for me and I rather not confuse folks by giving potentially bad advice through a naive implementation of my own. Those who are really itching to see how such an object is implemented should look at the <a href="https://github.com/mental/lazy/blob/master/lib/lazy.rb#L138-146">lazy.rb source code</a>, but if you treat future objects as black boxes you just need to know a few basic things about Ruby’s thread model to make use of this construct effectively.</p>

<p>The most important thing to keep in mind is that thread scheduling in standard Ruby is affected by a global interpreter lock (GIL) which makes it so that most computations end up blocking the execution of other threads. Alternative implementations such as JRuby and Rubinius remove this lock, but in standard Ruby this basically means that threads are mostly useful for backgrounding operations such as file and network I/O. This is because unlike most computations, I/O operations will give other threads a chance to run while waiting on their data to become available. Because lazy.rb’s implementation is thread based, future objects inherit the same set of restrictions. The other thing to be aware of is that Ruby does not explicitly join all of its threads once the main execution thread completes. This means that if I did not explicitly call <code class="highlighter-rouge">downloader.finish_all_downloads</code> in the previous example, the threads spun up by my future objects would be terminated if the main thread finished up before the downloads were completed. This may be obvious to anyone with a background in concurrency, but I scratched by head for a bit because of this issue.</p>

<p>Other than those issues, future objects pretty much allow you to solve some basic concurrency problems without knowing a whole lot about how to work with low level concurrency primitives. While the example I’ve shown here is a bit dull, I can imagine this technique might come in handy for things like sending emails or doing some time intensive computations that are part of an interactive reporting system. Both of these are problems I’ve had to solve before using tools like <a href="https://github.com/defunkt/resque">Resque</a>, but simple future objects might prove to be a lightweight 
alternative. I’d be curious to hear from our readers who have some concurrency experience whether that seems like a good idea or not, and also whether you have ideas for other potential applications of future objects.</p>

<h2 id="reflections">Reflections</h2>

<p>The general concept of wrapping data in results objects isn’t that exciting, but the notion of lazy objects and future objects show that results objects can be imbued with rich behaviors that can make our code more flexible and easier to understand.</p>

<p>While Rubyists are no strangers to benefits of lazy evaluation, the process of writing this article has lead me to believe that we can probably benefit from having some higher level constructs to work with. However, explaining my thoughts on that would take a whole other article.</p>

<p>Similarly, it seems that Ruby provides all the basic tooling necessary for concurrency, even when you take into account the limitations of standard Ruby due to its GIL. It would be nice if we could establish some good patterns and constructs for making this kind of programming more accessible to the amateur. Such constructs may end up hiding some of the details that experienced developers care about, but would likely lead to more performant code without sacrificing maintainability or learnability.</p>

<p>On a closing note, the fact that there are two interesting subcategories of results objects hints that there may be more left to discover. This is similarly true for patterns about arguments. I can feel in my gut that there are other patterns out there just waiting to be discovered, but cannot think of any off the top of my head at the moment. Have you seen anything in the wild that hints at how we can expand on these ideas? If so, please leave a comment!</p>


  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Send questions and feedback to:</li>
          <li><a href="mailto:gregory@practicingdeveloper.com">gregory@practicingdeveloper.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/practicingdeveloper"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">practicingdeveloper</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/practicingdev"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">practicingdev</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>The world's largest collection of lessons for experienced Ruby developers.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
